# Render Blueprint - Despliegue Automático
# Este archivo permite desplegar los servicios web con un solo click
# IMPORTANTE: La base de datos PostgreSQL debe crearse manualmente primero
# Ve a: https://dashboard.render.com/blueprints

services:
  # API Service (Backend)
  - type: web
    name: catalogo-productos-api
    env: node
    plan: free
    buildCommand: npm install
    startCommand: npm start
    rootDir: services/api
    envVars:
      - key: PORT
        value: 3001
      - key: API_VERSION
        value: v1
      # IMPORTANTE: Después de crear la BD PostgreSQL manualmente,
      # ve a este servicio y agrega la variable DATABASE_URL
      # desde la sección "Connections" de tu base de datos

  # Frontend Service
  - type: web
    name: catalogo-productos-frontend
    env: node
    plan: free
    buildCommand: npm install
    startCommand: npm start
    rootDir: services/frontend
    envVars:
      - key: PORT
        value: 3000
      # IMPORTANTE: Después de desplegar el API, actualiza esta URL
      # con la URL real del servicio API (ej: https://catalogo-productos-api.onrender.com)
      # DEBE empezar con NEXT_PUBLIC_ para que Next.js la exponga al cliente
      - key: NEXT_PUBLIC_API_URL
        value: https://catalogo-productos-api.onrender.com

# Trigger deploy - Wed Dec 10 15:56:23     2025
